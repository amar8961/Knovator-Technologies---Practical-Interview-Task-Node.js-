<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knovator Technologies - Practical Interview Task (Node.js)</title>
</head>
<body>
    <h4>WELCOME!</h4>
    <a href="./auth/auth.html">Login</a>

    <ul id="list" class="list"></ul>

</body>
<!-- Axios -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
</html>

<script>
    let getAllUrl="http://localhost:4000/getAll"

    // Get
    function get() {
    axios({ 
        method: 'get', 
        url: `${getAllUrl}`
    }).then(response => {
        console.log(response.data)
        for (var i = 0; i < response.data.length; i++) {
            showNewUserOnScreen(response.data[i]);
          }
        })
        .catch((err) => {
          document.body.innerHTML = document.body.innerHTML + "<h4> Something went wrong in .get</h4>";
          console.log(err);
        });
    }

    // Function for Show Data On Screen
    function showNewUserOnScreen(post) {
        const parentNode = document.getElementById("list");
        const childHTML = `<li id=${post._id}> ${post.title} - ${post.body} - POSTED BY -> ${post.user.name}</li>`;
    
        parentNode.innerHTML = parentNode.innerHTML + childHTML;
    }

    // DOM
    window.addEventListener('DOMContentLoaded', () => {
        get()
    })

</script>